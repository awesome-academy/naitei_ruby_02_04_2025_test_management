<div class="page-header mt-4">
  <h2 class="section-title"><%= t("supervisor.exams.index.title_short") %> (<%= @subject.exams.count %>)</h2>
  <div class="page-actions">
    <%= link_to t("supervisor.exams.index.add_new_exam"), new_supervisor_subject_exam_path(subject_id: @subject.id), class: "button button-success" %>
  </div>
</div>

<div id="exams_list_for_subject_<%= @subject.id %>" class="exams-container list-container">
  <% if @subject.exams.any? %>
    <% @subject.exams.order(created_at: :desc).each do |exam_template| %>
      <div class="content-card exam-item" id="<%= dom_id(exam_template) %>">
        <div class="card-section">
          <h3 class="item-title">
            <%= link_to exam_template.name, edit_supervisor_subject_exam_path(@subject, exam_template) %>
          </h3>
          <div class="item-meta">
            <p><strong><%= t("activerecord.attributes.exam.duration_minutes") %>:</strong> <%= exam_template.duration_minutes || t("common.not_available_short") %> <%= t("common.time_units.minutes", default: "phút") %></p>
            <p><strong><%= t("activerecord.attributes.exam.number_of_questions_to_take") %>:</strong> <%= exam_template.number_of_questions_to_take %> <%= t("common.questions_unit", default: "câu") %></p>
            <p><strong><%= t("activerecord.attributes.exam.pass_ratio") %>:</strong> <%= exam_template.pass_ratio %>%</p>
            <p><strong><%= t("activerecord.attributes.exam.retries_allowed") %>:</strong> <%= exam_template.retries %></p>
            <% if exam_template.open_at.present? %>
              <p><small><strong><%= t("activerecord.attributes.exam.open_at") %>:</strong> <%= l exam_template.open_at, format: :short %></small></p>
            <% end %>
            <% if exam_template.close_at.present? %>
              <p><small><strong><%= t("activerecord.attributes.exam.close_at") %>:</strong> <%= l exam_template.close_at, format: :short %></small></p>
            <% end %>
          </div>
          <div class="item-actions">
              <%= link_to t("actions.edit"), edit_supervisor_subject_exam_path(@subject, exam_template), class: "button button-small button-outline-warning" %>
              <%= button_to t("actions.delete"), supervisor_subject_exam_path(@subject, exam_template),
                            method: :delete,
                            class: "button button-small button-outline-danger" %>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
    <p class="empty-state-message"><%= t("supervisor.exams.index.no_exams_found_for_subject") %></p>
  <% end %>
</div>
